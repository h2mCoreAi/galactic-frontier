# Phase 1: Core Game Mechanics Enhancement
## Work Breakdown Structure (WBS)

**Goal**: Transform prototype into configurable, feature-complete game foundation

---

## 1.1 Configuration System Integration
**Milestone**: Implement config.json loading system

### 1.1.1 Create Config Loading Infrastructure
- [ ] Create config loading function in game script
- [ ] Add fetch call to load config/config.json at game startup
- [ ] Implement async/await pattern for config loading
- [ ] Add config loading error handling with console warnings
- [ ] Create configLoaded flag to prevent game start before config loads

### 1.1.2 Implement Ship Configuration
- [ ] Replace hardcoded ship.maxSpeed (5) with config.ship.maxSpeed
- [ ] Replace hardcoded ship.thrust (0.1) with config.ship.thrust
- [ ] Replace hardcoded ship.size (20) with config.ship.size
- [ ] Replace hardcoded ship health initialization with config.ship.maxHealth
- [ ] Update ship object initialization to use config values

### 1.1.3 Implement Projectile Configuration
- [ ] Replace hardcoded projectileSpeed (7) with config.projectiles.speed
- [ ] Replace hardcoded projectileLife (100) with config.projectiles.life
- [ ] Replace hardcoded projectile cooldown with config.projectiles.cooldown
- [ ] Update projectile creation to use config values
- [ ] Update projectile movement calculations to use config speed

### 1.1.4 Implement Enemy Configuration
- [ ] Create enemy type mapping from config.enemies array
- [ ] Replace hardcoded baseEnemyTypes with config-loaded enemy types
- [ ] Update enemy spawn logic to use config-based enemy selection
- [ ] Implement level-based damage scaling using config values
- [ ] Update enemy AI parameters (speed, shootInterval, damage values)

### 1.1.5 Implement Game Configuration
- [ ] Replace hardcoded scoreToLevelUp (500) with config.game.scoreToLevelUp
- [ ] Replace hardcoded minSpawnInterval (60) with config.game.minSpawnInterval
- [ ] Replace hardcoded maxSpawnInterval (300) with config.game.maxSpawnInterval
- [ ] Update spawn timer calculations to use config values
- [ ] Update level progression logic to use config score thresholds

### 1.1.6 Add Runtime Validation and Fallbacks
- [ ] Add config schema validation for required fields
- [ ] Implement fallback default values for missing config properties
- [ ] Add console logging for config loading success/failure
- [ ] Create config validation function to check data types
- [ ] Add error handling for malformed config.json

---

## 1.2 Control System Refinement
**Milestone**: Update controls to match specification

### 1.2.1 Remove Old Mouse Controls
- [ ] Remove existing mousePressed event listener for left mouse button
- [ ] Remove mouse button shooting logic from game loop
- [ ] Clean up mouse event variables and state tracking
- [ ] Remove left mouse button event handling code
- [ ] Test that mouse rotation still works independently

### 1.2.2 Implement W Key Thrust Control
- [ ] Add W key event listener for keydown/keyup events
- [ ] Create thrust state variable (boolean)
- [ ] Modify game loop to apply thrust when W is pressed
- [ ] Implement continuous acceleration while W is held
- [ ] Add thrust deceleration when W is released

### 1.2.3 Implement Spacebar Afterburner Control
- [ ] Add spacebar key event listener for keydown/keyup events
- [ ] Create afterburner state variable (boolean)
- [ ] Modify thrust logic to apply afterburner boost when spacebar pressed
- [ ] Implement afterburner energy consumption logic
- [ ] Add afterburner release and energy regeneration

### 1.2.4 Update Right Mouse Button Shooting
- [ ] Ensure right mouse button shooting works correctly
- [ ] Test right mouse button event handling
- [ ] Verify projectile creation on right mouse button press
- [ ] Confirm shooting works independently of movement controls
- [ ] Test rapid firing capability

### 1.2.5 Control System Integration Testing
- [ ] Test W key thrust acceleration and deceleration
- [ ] Test spacebar afterburner activation and energy management
- [ ] Test mouse rotation remains smooth and responsive
- [ ] Test right mouse button shooting functionality
- [ ] Verify no conflicts between different control inputs

---

## 1.3 Health & Afterburner Systems
**Milestone**: Implement damage and boost mechanics

### 1.3.1 Initialize Health System Variables
- [ ] Add currentHealth property to ship object
- [ ] Initialize currentHealth to config.ship.maxHealth
- [ ] Add afterburnerEnergy property to ship object
- [ ] Initialize afterburnerEnergy to config.ship.afterburnerMax
- [ ] Add regeneration timer for afterburner energy

### 1.3.2 Implement Damage System
- [ ] Add collision detection for enemy projectiles hitting ship
- [ ] Implement health reduction on projectile collision
- [ ] Add collision detection for enemy ship collisions
- [ ] Implement health reduction on enemy collision
- [ ] Add game over condition when health reaches zero

### 1.3.3 Implement Afterburner Energy System
- [ ] Add energy consumption when spacebar afterburner is active
- [ ] Implement energy depletion rate using config.ship.afterburnerDepleteRate
- [ ] Add energy regeneration when afterburner is not active
- [ ] Implement regeneration rate using config.ship.afterburnerRegenRate
- [ ] Prevent afterburner activation when energy is depleted

### 1.3.4 Create Visual Health Indicators
- [ ] Design health bar UI element positioning and styling
- [ ] Implement health bar rendering in game loop
- [ ] Add health percentage calculation and display
- [ ] Create color coding for health levels (green/yellow/red)
- [ ] Update health bar in real-time during gameplay

### 1.3.5 Create Visual Afterburner Indicators
- [ ] Design afterburner bar UI element positioning and styling
- [ ] Implement afterburner bar rendering in game loop
- [ ] Add energy percentage calculation and display
- [ ] Create color coding for energy levels (blue/cyan/white)
- [ ] Update afterburner bar in real-time during gameplay

### 1.3.6 Health System Integration Testing
- [ ] Test health reduction on enemy projectile hits
- [ ] Test health reduction on enemy collisions
- [ ] Test game over condition when health depletes
- [ ] Test health bar visual updates and color changes
- [ ] Verify health system works with config values

### 1.3.7 Afterburner System Integration Testing
- [ ] Test afterburner energy consumption during use
- [ ] Test afterburner energy regeneration when inactive
- [ ] Test afterburner deactivation when energy depleted
- [ ] Test afterburner bar visual updates and color changes
- [ ] Verify afterburner system works with config values

---

## 1.4 Testing & Validation
**Milestone**: Core mechanics functional and testable

### 1.4.1 Configuration Loading Tests
- [ ] Test config.json loads successfully on game startup
- [ ] Verify all ship properties load from config
- [ ] Verify all projectile properties load from config
- [ ] Verify all enemy types load from config
- [ ] Verify all game settings load from config

### 1.4.2 Control System Tests
- [ ] Test W key thrust provides continuous acceleration
- [ ] Test spacebar afterburner provides speed boost
- [ ] Test mouse rotation remains smooth and accurate
- [ ] Test right mouse button creates projectiles
- [ ] Test control combinations work without conflicts

### 1.4.3 Health System Tests
- [ ] Test health bar displays correct percentage
- [ ] Test health reduction on projectile hits
- [ ] Test health reduction on enemy collisions
- [ ] Test game over triggers at zero health
- [ ] Test health bar color changes appropriately

### 1.4.4 Afterburner System Tests
- [ ] Test afterburner bar displays correct energy level
- [ ] Test energy depletes during afterburner use
- [ ] Test energy regenerates when afterburner inactive
- [ ] Test afterburner deactivates when energy depleted
- [ ] Test afterburner bar color changes appropriately

### 1.4.5 Integration Testing
- [ ] Test full game loop with all systems active
- [ ] Verify 60 FPS performance maintained
- [ ] Test config changes affect gameplay appropriately
- [ ] Test game restart functionality
- [ ] Verify no crashes or errors during extended play

### 1.4.6 Error Handling Validation
- [ ] Test behavior with missing config.json file
- [ ] Test behavior with malformed config.json
- [ ] Test behavior with missing config properties
- [ ] Verify fallback values work correctly
- [ ] Test console error messages are informative

---

## Phase 1 Completion Checklist

### Configuration System
- [ ] All hardcoded values replaced with config-loaded values
- [ ] Config validation implemented with fallbacks
- [ ] Error handling for config loading failures
- [ ] Runtime config changes take effect

### Control System
- [ ] W key provides thrust acceleration
- [ ] Spacebar provides afterburner boost with energy management
- [ ] Mouse rotation works smoothly
- [ ] Right mouse button shooting functional
- [ ] No control conflicts or issues

### Health & Afterburner Systems
- [ ] Health system with damage on hits/collisions
- [ ] Visual health bar with color coding
- [ ] Afterburner energy system with depletion/regeneration
- [ ] Visual afterburner bar with color coding
- [ ] Game over on health depletion

### Testing & Validation
- [ ] All systems load config values correctly
- [ ] All controls work as specified
- [ ] Health and afterburner systems functional
- [ ] No performance issues or crashes
- [ ] Error handling works appropriately

---

## Success Criteria
- ✅ Game loads and runs without hardcoded values
- ✅ All controls work as per specification (W, mouse, RMB, spacebar)
- ✅ Health and afterburner systems fully implemented with visuals
- ✅ Config.json drives all game parameters
- ✅ Game maintains 60 FPS performance
- ✅ No crashes or errors during testing
- ✅ Systems work together without conflicts

---

## Dependencies
- `config/config.json` file exists and is properly formatted
- Nginx serving game files correctly
- Browser supports modern JavaScript features
- Game canvas renders at expected resolution

---

## Estimated Effort: 2-3 weeks
- Configuration System: 3-4 days
- Control System: 2-3 days
- Health & Afterburner Systems: 4-5 days
- Testing & Validation: 3-4 days
